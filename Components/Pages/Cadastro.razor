@page "/Cadastro"
@inject HttpClient Http

<div class="register-container">
    <div class="left-side">
        <h1>Anuncia Picos!</h1>
        <img src="images/logo.png" alt="Logo Anuncia Picos">
        <h2>Obrigado por fazer parte do Anuncia Picos! Estamos felizes em tê-lo conosco </h2>
        <p>"Descubra ofertas incríveis e negocie com facilidade no Anuncia Picos!"</p>
    </div>
    <div class="right-side">
        <h3>Cadastre-se gratuitamente e aproveite as melhores oportunidades</h3>

        <form @onsubmit="HandleSubmit">
            <div class="input-container">
                <label for="Name">Nome Completo:</label>
                <input type="text" id="Name" @bind="user.Name" placeholder="Digite seu nome completo" required>
            </div>

            <div class="input-container">
                <label for="Email">Email:</label>
                <input type="email" id="Email" @bind="user.Email" placeholder="Email" required>
            </div>

            <div class="input-container">
                <label for="CPF">CPF:</label>
                <input type="text" id="CPF" @bind="user.CPF" placeholder="Digite seu CPF" maxlength="11" required>
            </div>

            <div class="input-container">
                <label for="Phone">Telefone:</label>
                <input type="tel" id="Phone" @bind="user.Phone" placeholder="Digite seu telefone" maxlength="11" required>
            </div>

            <div class="input-container">
                <label for="Password">Senha:</label>
                <input type="password" id="Password" @bind="user.Password" placeholder="Digite sua senha" required>
            </div>

            <div class="input-container">
                <label for="ConfirmPassword">Confirme sua Senha:</label>
                <input type="password" id="ConfirmPassword" @bind="user.ConfirmPassword" placeholder="Confirme sua senha" required>
            </div>

            <div class="form-actions">
                <a href="/Login" class="cadlink">Já tem uma conta? FAÇA LOGIN</a>
                <button type="submit" class="register-btn">CADASTRAR</button>
            </div>
        </form>
    </div>
</div>

@code {
    private UserModel user = new UserModel();

    private async Task HandleSubmit()
    {
        try
        {
            var response = await Http.PostAsJsonAsync("http://localhost:5255//auth/cadastro", user);

            if (response.IsSuccessStatusCode)
            {
                Console.WriteLine("Cadastro realizado com sucesso!");
                // redirecionamento ou mensagem aqui
            }
            else
            {
                Console.WriteLine("Erro ao cadastrar usuário.");
                // mensagem de erro aqui
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Erro: {ex.Message}");
        }
    }

    public class UserModel
    {
        public string? Name { get; set; }
        public string? Email { get; set; }
        public string? CPF { get; set; }
        public string? Phone { get; set; }
        public string? Password { get; set; }
        public string? ConfirmPassword { get; set; }
    }
}
